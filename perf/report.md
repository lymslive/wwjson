# WWJSON 性能测试报告

## 测试环境信息

- **测试时间**: 2025-12-13 10:30:00
- **测试环境**: win10 WSL1(ubuntu20.4)
- **编译器版本**: GCC 9.4.0
- **编译模式**: Release (-O2 优化)
- **测试目标**: `/build-release/perf/pfwwjson`

## 关键测试结果

### 1. JSON构建性能 (build_relative)

**测试参数**: --loop=500，多轮测试取平均值

| JSON大小 | wwjson (ms) | yyjson (ms) | 性能比 | wwjson优势 |
|----------|-------------|-------------|--------|------------|
| ~0.5k (n=6) | 0.9579 | 1.1299 | 0.848 | **17.96% faster** |
| ~1k (n=12) | 1.9773 | 2.1583 | 0.916 | **9.15% faster** |
| ~10k (n=120) | 22.1815 | 23.5810 | 0.941 | **6.31% faster** |
| ~100k (n=1200) | 239.3940 | 307.5030 | 0.779 | **28.45% faster** |
| ~自定义 (n=1000) | 167.2810 | 167.4710 | 0.999 | 性能相当 |

**结论**: wwjson在JSON构建方面普遍优于yyjson，尤其在大JSON对象(100k)场景下优势明显，优势范围6.31%-28.45%。

### 2. 数字序列化性能 (number_int_rel)

**测试参数**: --loop=500, --items=1000, --start=0

| 测试项目 | wwjson (ms) | yyjson (ms) | 性能比 | 优势方 |
|----------|-------------|-------------|--------|--------|
| 随机整数数组 | 9.9860 | 7.6577 | 1.304 | yyjson快30.40% |

**结论**: 在数字序列化场景下，yyjson API表现更好，wwjson需要进一步优化数字序列化性能。

### 3. 字符串对象性能 (string_object_relative)

**测试参数**: --loop=500，多种items数量测试

| Items数量 | wwjson (ms) | yyjson (ms) | 性能比 | wwjson优势 |
|-----------|-------------|-------------|--------|------------|
| 10 | 0.4345 | 0.5228 | 0.831 | **20.32% faster** |
| 50 | 2.3238 | 2.4716 | 0.940 | **6.36% faster** |
| 100 | 4.4086 | 5.0517 | 0.873 | **14.59% faster** |
| 500 | 28.7764 | 30.4202 | 0.946 | **5.71% faster** |
| 1000 | 44.9790 | 47.3963 | 0.949 | **5.37% faster** |

**结论**: wwjson在字符串对象构建方面稳定优于yyjson，优势范围5.37%-20.32%。

### 4. API方法对比 (api_basic_vs_*)

**测试参数**: --loop=100, --items=1000

| 对比项目 | Basic方法 (ms) | 对比方法 (ms) | 性能比 | 结论 |
|----------|----------------|---------------|--------|------|
| 基本vs自动关闭 | 26.5576 | 26.0618 | 1.019 | 性能相当 |
| 基本vs操作符 | 22.3129 | 23.4342 | 0.952 | 性能相当 |

**结论**: 不同API调用方式性能差异很小，设计选择更多考虑易用性和代码风格。

## 性能分析总结

### wwjson 优势领域
1. **JSON对象构建**: 在各种大小JSON对象构建中普遍优于yyjson
2. **字符串处理**: 字符串数组和对象构建性能稳定优势
3. **大对象处理**: 在大JSON对象(100k+)场景下优势明显

### 需要优化的领域
1. **数字序列化**: 整数数组构建性能低于yyjson API
2. **浮点数处理**: 浮点数组构建性能有待提升

### 技术原因分析
1. wwjson 避免了 DOM 中间结构开销，在以字符串为主的 json 构建中性能优势较明显
2. wwjson 在数字序列化的算法不如主流 json 库，尤其浮点数序列化算法复杂，未引入

### 整体评估
wwjson在核心JSON构建功能上表现优异，特别是在字符串和对象处理方面。API设计简洁，易于使用。需要在数字序列化性能方面进行针对性优化以达到更全面的性能优势。

---

*报告生成时间: 2025-12-13 10:30:00*  
*测试环境: win10 WSL1(ubuntu20.4) - GCC 9.4.0*
